# Migration `20201022033823-migration`

This migration has been generated by David S Price at 10/21/2020, 8:38:23 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Invoice" (
    "id" TEXT NOT NULL,
    "invoiceNumber" TEXT NOT NULL,
    "date" TEXT NOT NULL,
    "body" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL,
    "userId" TEXT NOT NULL,

    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
PRIMARY KEY ("id")
)

CREATE TABLE "User" (
    "id" TEXT NOT NULL,
    "email" TEXT NOT NULL,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "Invoice.id_userId_unique" ON "Invoice"("id", "userId")

CREATE UNIQUE INDEX "User.email_unique" ON "User"("email")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201022033823-migration
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,27 @@
+datasource sqlite {
+  provider = ["sqlite", "postgresql"]
+  url = "***"
+}
+
+generator client {
+  provider      = "prisma-client-js"
+  binaryTargets = "native"
+}
+
+model Invoice {
+  id            String      @default(cuid()) @id
+  invoiceNumber String
+  date          String
+  body          String
+  createdAt     DateTime @default(now())
+  updatedAt     DateTime @updatedAt
+  user          User     @relation(fields: [userId], references: [id])
+  userId        String
+  @@unique([id, userId])
+}
+
+model User {
+  id       String       @default(cuid()) @id
+  email    String    @unique
+  invoices Invoice[]
+}
```


